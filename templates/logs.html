// {% extends "base.html" %}

{% block title %}全入退室・出席ログ{% endblock %}

{% block content %}
<h1 class="mb-4">{{ title }}</h1>

<div class="alert alert-info">
    <i class="fas fa-info-circle me-2"></i>**入退室状況**は機器からの記録（入室/退室/欠席）を、**出席状況**は判定結果（出席/遅刻/途中入室/途中退室/欠席）を示します。
</div>

<!-- 削除ボタンをコメントアウト（エンドポイントが存在しないため） -->
<!-- <form method="POST" action="{{ url_for('delete_all_records') }}" onsubmit="return confirm('本当に全ての記録を削除しますか？この操作は元に戻せません。');" class="mb-4">
    <button type="submit" class="btn btn-danger"><i class="fas fa-trash-alt me-2"></i>全ての記録を削除</button>
</form> -->

<div class="table-responsive">
    <table class="table table-striped table-bordered table-sm">
        <thead class="table-primary">
            <tr>
                <th>記録ID</th>
                <th>学籍番号</th>
                <th>氏名</th>
                <th>日付</th>
                <th>時刻</th>
                <th>入退室状況</th>
                <th>出席状況</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            {% for record in records %}
            <tr class="{% if record.出席状況 == '出席' %}status-present
                       {% elif record.出席状況 == '遅刻' or record.出席状況 == '途中入室' %}status-late
                       {% elif record.出席状況 == '途中退室' %}status-early-exit
                       {% elif record.出席状況 == '欠席' %}status-absent
                       {% else %}status-na
                       {% endif %}">
                <td>{{ record.記録ID }}</td>
                <td>{{ record.学籍番号 }}</td>
                <td>{{ record.名前 }}</td>
                <td>{{ record.日付 }}</td>
                <td>{{ record.時刻 }}</td>
                <td>{{ record.入退室状況 }}</td>
                <td><strong>{{ record.出席状況 }}</strong></td>
                <td>
                    <form method="POST" action="{{ url_for('delete_record', record_id=record.記録ID) }}" onsubmit="return confirm('この記録を削除しますか？');">
                        <button type="submit" class="btn btn-sm btn-outline-danger"><i class="fas fa-trash"></i></button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
