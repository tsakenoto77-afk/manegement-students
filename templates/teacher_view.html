// {% extends "base.html" %}

{% block title %}教員専用ビュー{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1>担当授業の学生出欠状況</h1>
    <p>教員: {{ current_user.name }} | <a href="{{ url_for('logout_page') }}">ログアウト</a></p>

    {% for data in attendance_data %}
        <h2>{{ data.subject_name }}</h2>
        <div class="card p-4 mb-4">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th scope="col">学籍番号</th>
                        <th scope="col">氏名</th>
                        <th scope="col">出席回数</th>
                        <th scope="col">欠席回数</th>
                    </tr>
                </thead>
                <tbody>
                    {% for student in data.students %}
                    <tr {% if student.absent_count > 0 %}class="table-danger"{% endif %}>
                        <td>{{ student.学籍番号 }}</td>
                        <td>{{ student.氏名 }}</td>
                        <td>{{ student.attended_count }}</td>
                        <td>{{ student.absent_count }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="4" class="text-center text-muted">学生データがありません。</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% endfor %}
</div>
{% endblock %}
